---
import Layout from '../layouts/Layout.astro';

const title = "Pr√©paration Civique - R√©ussir votre Naturalisation";
---

<Layout title={title}>
	<header class="header">
		<div class="container">
			<div class="logo">
				<div class="flag">
					<span class="blue"></span>
					<span class="white"></span>
					<span class="red"></span>
				</div>
				<h1>Pr√©paration Civique</h1>
			</div>
			<p class="subtitle">Votre guide intelligent pour r√©ussir l'entretien de naturalisation fran√ßaise</p>
		</div>
	</header>

	<main class="container main-content">
		<section class="hero-section">
			<div class="hero-text">
				<h2>Pr√©parez-vous de mani√®re scientifique et efficace</h2>
				<p>L'entretien d'assimilation n'est pas qu'un examen de connaissances, c'est une discussion. Notre plateforme utilise la r√©p√©tition espac√©e pour vous aider √† m√©moriser les valeurs, l'histoire et la culture de la R√©publique sans effort.</p>
				
				<div class="cta-group" id="auth-cta">
					<a href={`${import.meta.env.BASE_URL}/diagnostic/`} class="btn-primary" id="main-cta">√âvaluer mon niveau maintenant</a>
					<p class="cta-sub">Test gratuit de 20 questions ‚Ä¢ 5 minutes</p>
				</div>
			</div>
			
			<div class="features-grid">
				<div class="feature-card">
					<div class="feature-icon">üéØ</div>
					<h3>Test de positionnement</h3>
					<p>D√©couvrez vos points forts et les th√®mes (Histoire, G√©ographie, Valeurs) que vous devez travailler en priorit√©.</p>
				</div>
				<div class="feature-card">
					<div class="feature-icon">üß†</div>
					<h3>R√©p√©tition espac√©e</h3>
					<p>Ne perdez plus de temps √† relire ce que vous savez d√©j√†. L'algorithme se concentre sur vos faiblesses.</p>
				</div>
				<div class="feature-card">
					<div class="feature-icon">üìà</div>
					<h3>Progression visible</h3>
					<p>Suivez votre jauge de pr√©paration et votre s√©rie de r√©visions quotidiennes pour rester motiv√© jusqu'au jour J.</p>
				</div>
			</div>
		</section>
	</main>

	<footer class="footer">
		<div class="container">
			<div class="footer-links">
				<a href={`${import.meta.env.BASE_URL}/library/`}>Toutes les questions (Biblioth√®que)</a>
			</div>
			<p>&copy; 2026 Pr√©paration Civique - France</p>
		</div>
	</footer>
</Layout>

<script>
	import { getProfile } from '../utils/store.js';

	// Client-side check to see if user already has a profile
	document.addEventListener('DOMContentLoaded', () => {
		const profile = getProfile();
		const mainCta = document.getElementById('main-cta') as HTMLAnchorElement;
		const ctaSub = document.querySelector('.cta-sub') as HTMLElement;
		
		if (profile && profile.diagnosticDone) {
			mainCta.href = `${import.meta.env.BASE_URL}/dashboard/`;
			mainCta.textContent = "Aller √† mon tableau de bord";
			if (ctaSub) ctaSub.style.display = 'none';
		}
	});
</script>

<style>
	.header {
		background: var(--blue);
		color: white;
		padding: 4rem 0;
		text-align: center;
		border-bottom: 5px solid var(--red);
	}
	.logo {
		display: flex;
		flex-direction: column;
		align-items: center;
		margin-bottom: 1.5rem;
	}
	.flag {
		display: flex;
		width: 80px;
		height: 50px;
		border-radius: 4px;
		overflow: hidden;
		box-shadow: 0 4px 10px rgba(0,0,0,0.3);
	}
	.flag span { flex: 1; }
	.flag .blue { background: #002395; }
	.flag .white { background: #ffffff; }
	.flag .red { background: #ed2939; }
	
	.header h1 {
		color: white;
		margin: 1.5rem 0 0.5rem;
		font-size: 3rem;
		font-weight: 900;
		letter-spacing: -0.04em;
	}
	.subtitle {
		font-size: 1.5rem;
		opacity: 0.9;
		font-weight: 300;
		max-width: 600px;
		margin: 0 auto;
	}

	.main-content {
		padding-top: 4rem;
		padding-bottom: 4rem;
	}

	.hero-section {
		display: flex;
		flex-direction: column;
		align-items: center;
		text-align: center;
	}

	.hero-text {
		max-width: 800px;
		margin-bottom: 4rem;
	}

	.hero-text h2 {
		font-size: 2.25rem;
		color: #1a202c;
		margin-bottom: 1.5rem;
	}

	.hero-text p {
		font-size: 1.2rem;
		color: #4a5568;
		line-height: 1.6;
		margin-bottom: 2.5rem;
	}

	.cta-group {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1rem;
	}

	.btn-primary {
		background: var(--red);
		color: white;
		padding: 1.25rem 2.5rem;
		border-radius: 50px;
		font-weight: 800;
		font-size: 1.25rem;
		text-decoration: none;
		transition: transform 0.2s, box-shadow 0.2s;
		box-shadow: 0 10px 25px rgba(237, 41, 57, 0.3);
		display: inline-block;
	}

	.btn-primary:hover {
		transform: translateY(-3px);
		box-shadow: 0 15px 35px rgba(237, 41, 57, 0.4);
		background: #c53030;
	}

	.cta-sub {
		color: #718096;
		font-size: 0.95rem;
		font-weight: 500;
	}

	.features-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: 2rem;
		width: 100%;
	}

	.feature-card {
		background: white;
		padding: 2.5rem 2rem;
		border-radius: 20px;
		box-shadow: 0 10px 30px rgba(0,0,0,0.05);
		border: 1px solid var(--border-color);
		text-align: left;
		transition: transform 0.3s;
	}

	.feature-card:hover {
		transform: translateY(-5px);
	}

	.feature-icon {
		font-size: 3rem;
		margin-bottom: 1.5rem;
	}

	.feature-card h3 {
		font-size: 1.5rem;
		color: #1a202c;
		margin-bottom: 1rem;
	}

	.feature-card p {
		color: #4a5568;
		line-height: 1.5;
	}

	.footer {
		background: #1a202c;
		color: #a0aec0;
		padding: 4rem 0;
		text-align: center;
	}
	.footer-links {
		display: flex;
		justify-content: center;
		gap: 2rem;
		margin-bottom: 2rem;
	}
	.footer-links a {
		color: white;
		text-decoration: none;
		font-weight: 600;
	}
	.footer-links a:hover { text-decoration: underline; }

	@media (max-width: 768px) {
		.header h1 { font-size: 2rem; }
		.hero-text h2 { font-size: 1.75rem; }
		.btn-primary { padding: 1rem 2rem; font-size: 1.1rem; }
	}
</style>
